<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>GNU/Emacs on 映屿</title><link>https://www.glowisle.me/tags/gnu/emacs/</link><description>Recent content in GNU/Emacs on 映屿</description><generator>Hugo</generator><language>zh-CN</language><managingEditor>i@glowisle.me (五葉地錦)</managingEditor><webMaster>i@glowisle.me (五葉地錦)</webMaster><lastBuildDate>Wed, 12 Nov 2025 16:48:02 +0800</lastBuildDate><atom:link href="http://www.glowisle.me/tags/gnu/emacs/atom.xml" rel="self" type="application/rss+xml"/><item><title>使用Emacs收发邮件</title><link>https://www.glowisle.me/posts/email-with-emacs/</link><pubDate>Wed, 12 Nov 2025 16:48:02 +0800</pubDate><author>i@glowisle.me (五葉地錦)</author><guid>https://www.glowisle.me/posts/email-with-emacs/</guid><description>&lt;p&gt;作为一个合格的操作系统，肯定少不了Email. 我的配置很简单，只要实现基础的收发功能即可，每天的邮件量不大。在这里记录一下配置。&lt;/p&gt;
&lt;h2 id="收邮件"&gt;收邮件&lt;/h2&gt;
&lt;p&gt;我尝试过 &lt;strong&gt;&lt;a href="https://www.fetchmail.info"&gt;fetchmail&lt;/a&gt;&lt;/strong&gt;，但不知道这个东西拿到的邮件都在哪，所以最后还是选择了 &lt;strong&gt;mbsync&lt;/strong&gt;.&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# ~/.mbsyncrc
# GlowIsle 账户配置
IMAPAccount GlowIsle
Host imap.qiye.aliyun.com
Port 993
User i@glowisle.me
Pass ******
TLSType IMAPS
AuthMechs LOGIN
CertificateFile /etc/ssl/certs/ca-certificates.crt

# 远程存储
IMAPStore glowisle-remote
Account GlowIsle

# 本地存储
MaildirStore glowisle-local
Path ~/mail/GlowIsle/
Inbox ~/mail/GlowIsle/Inbox
Subfolders Verbatim

# 同步通道
Channel glowisle
Far :glowisle-remote:
Near :glowisle-local:
Patterns *
Create Both
Sync All
Expunge Both
SyncState *
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="发邮件"&gt;发邮件&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;# ~/.msmtprc
# glowisle
account glowisle 
host smtp.qiye.aliyun.com
from i@glowisle.me
auth login
port 465
user i@glowisle.me
password ******* 
auth on
tls on
tls_starttls off #使用465端口时不能开启
tls_certcheck off 
tls_trust_file /etc/ssl/certs/ca-certificates.crt

account default : glowisle
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="emacs-配置"&gt;Emacs 配置&lt;/h2&gt;
&lt;p&gt;在Doom Emacs的&lt;code&gt;init.el&lt;/code&gt;中开启 mu4e&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-lisp" data-lang="lisp"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#98c379"&gt;:email&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#e06c75"&gt;mu4e&lt;/span&gt; &lt;span style="color:#e06c75"&gt;+org&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-lisp" data-lang="lisp"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#7f848e"&gt;;; config.el&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;(&lt;span style="color:#e06c75"&gt;after!&lt;/span&gt; &lt;span style="color:#e06c75"&gt;mu4e&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#7f848e"&gt;;; 基本设置&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#c678dd"&gt;setq&lt;/span&gt; &lt;span style="color:#e06c75"&gt;mu4e-maildir&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#34;~/mail&amp;#34;&lt;/span&gt; &lt;span style="color:#7f848e"&gt;; 邮件目录&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e06c75"&gt;mu4e-get-mail-command&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#34;mbsync -a&amp;#34;&lt;/span&gt; &lt;span style="color:#7f848e"&gt;; 接收邮件命令&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e06c75"&gt;mu4e-update-interval&lt;/span&gt; &lt;span style="color:#d19a66"&gt;300&lt;/span&gt; &lt;span style="color:#7f848e"&gt;; 自动更新间隔（秒）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e06c75"&gt;mu4e-view-show-images&lt;/span&gt; &lt;span style="color:#e06c75"&gt;t&lt;/span&gt; &lt;span style="color:#7f848e"&gt;; 显示图片&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e06c75"&gt;mu4e-compose-signature&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#34;Best regards.\nVerdant&amp;#34;&lt;/span&gt;) &lt;span style="color:#7f848e"&gt;; 邮件签名&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#7f848e"&gt;;; 使用 msmtp 发送邮件&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#c678dd"&gt;setq&lt;/span&gt; &lt;span style="color:#e06c75"&gt;message-send-mail-function&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#39;message-send-mail-with-sendmail&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e06c75"&gt;sendmail-program&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#34;/usr/bin/msmtp&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e06c75"&gt;sendmail-arguments&lt;/span&gt; &lt;span style="color:#56b6c2"&gt;&amp;#39;&lt;/span&gt;(&lt;span style="color:#98c379"&gt;&amp;#34;--read-envelope-from&amp;#34;&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#34;--read-recipients&amp;#34;&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#c678dd"&gt;setq&lt;/span&gt; &lt;span style="color:#e06c75"&gt;mu4e-contexts&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#e5c07b"&gt;list&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#e06c75"&gt;make-mu4e-context&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#98c379"&gt;:name&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#34;GlowIsle&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#98c379"&gt;:match-func&lt;/span&gt; (&lt;span style="color:#e5c07b"&gt;lambda&lt;/span&gt; (&lt;span style="color:#e06c75"&gt;msg&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#e5c07b"&gt;when&lt;/span&gt; &lt;span style="color:#e06c75"&gt;msg&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#e06c75"&gt;string-match-p&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#34;^/GlowIsle&amp;#34;&lt;/span&gt; (&lt;span style="color:#e06c75"&gt;mu4e-message-field&lt;/span&gt; &lt;span style="color:#e06c75"&gt;msg&lt;/span&gt; &lt;span style="color:#98c379"&gt;:maildir&lt;/span&gt;))))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#98c379"&gt;:vars&lt;/span&gt; &lt;span style="color:#56b6c2"&gt;&amp;#39;&lt;/span&gt;((&lt;span style="color:#e06c75"&gt;user-mail-address&lt;/span&gt; &lt;span style="color:#56b6c2"&gt;.&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#34;i@glowisle.me&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#e06c75"&gt;user-full-name&lt;/span&gt; &lt;span style="color:#56b6c2"&gt;.&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#34;Verdant&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#e06c75"&gt;smtpmail-smtp-server&lt;/span&gt; &lt;span style="color:#56b6c2"&gt;.&lt;/span&gt; &lt;span style="color:#98c379"&gt;&amp;#34;smtp.qiye.aliyun.com&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#e06c75"&gt;smtpmail-smtp-service&lt;/span&gt; &lt;span style="color:#56b6c2"&gt;.&lt;/span&gt; &lt;span style="color:#d19a66"&gt;465&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; (&lt;span style="color:#e06c75"&gt;smtpmail-stream-type&lt;/span&gt; &lt;span style="color:#56b6c2"&gt;.&lt;/span&gt; &lt;span style="color:#e06c75"&gt;starttls&lt;/span&gt;)))))
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; )
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="基本使用"&gt;基本使用&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SPC o m&lt;/code&gt; 进入 mu4e 主页面&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;Basics

 * [J]ump to some maildir
 * enter a [s]earch query
 * [C]ompose a new message

Bookmarks

 * [bu] Unread messages (0/0)
 * [bt] Today&amp;#39;s messages (0/14)
 * [bw] Last 7 days
 * [bp] Messages with images (0/0)
 * [bf] Flagged messages (0/1)

Misc

 * [;]Switch focus
 * [u]pdate email &amp;amp; database

 * [N]ews
 * [A]bout mu4e
 * [H]elp
 * [q]uit
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;微软的Outlook邮箱使用OAuth2.0认证，我暂时没找到成功的解决方案能在Emacs上使用，如果有哪位路过的好哥们知道方法请留言或&lt;a href="mailto:i@glowisle.me"&gt;发个邮件&lt;/a&gt;探讨一下！&lt;/p&gt;</description></item></channel></rss>