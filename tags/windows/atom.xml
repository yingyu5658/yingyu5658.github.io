<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Windows on 映屿</title>
    <link>https://www.glowisle.me/tags/windows/</link>
    <description>Recent content in Windows on 映屿 | 关于互联网、书籍、生活琐事以及那些一闪而过的念头</description>
    <generator>Hugo</generator>
    <language>en</language>
      <managingEditor>i@yingyu5658.me</managingEditor>
      <webMaster>i@yingyu5658.me</webMaster>
    
    <lastBuildDate>Tue, 04 Mar 2025 20:58:30 +0000</lastBuildDate>
    
    <atom:link href="http://www.glowisle.me/tags/windows/atom.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>【未解决】Windows WSL报错：Error: 0x80080005 ???????</title>
      <link>https://www.glowisle.me/posts/%E6%9C%AA%E8%A7%A3%E5%86%B3windows-wsl%E6%8A%A5%E9%94%99error-0x80080005/</link>
      <pubDate>Tue, 04 Mar 2025 20:58:30 +0000</pubDate>
      <guid>https://www.glowisle.me/posts/%E6%9C%AA%E8%A7%A3%E5%86%B3windows-wsl%E6%8A%A5%E9%94%99error-0x80080005/</guid>
      <description>&lt;p&gt;设备环境：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;操作系统：Windows 10&#xA;安装系统：Arch Linux&#xA;错误日志：&#xA;Installing, this may take a few minutes...&#xA;WslRegisterDistribution failed with error: 0x80080005&#xA;Error: 0x80080005 ???????&#xA;&#xA;Press any key to continue...&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;网上有一篇&lt;a href=&#34;https://ask.csdn.net/questions/7625716&#34;&gt;文章&lt;/a&gt;提到这个错误，下面的评论回复以管理员权限运行命令提示符并执行&lt;code&gt;sc stop LxssManager&lt;/code&gt;和&lt;code&gt;sc start LxssManager&lt;/code&gt;&#xA;出现如下报错：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;C:\Windows\system32&amp;gt;sc stop LxssManager&#xA;[SC] OpenService 失败 1060:&#xA;&#xA;指定的服务未安装。&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;顺藤摸瓜，在网上寻找&lt;code&gt;LxssManager&lt;/code&gt;这个服务要如何安装。&#xA;网上暂时还没有找到相关文章能够解决这个问题，但是CSDN的一篇文章引起了我的注意&#xA;&lt;a href=&#34;https://blog.csdn.net/renwudao24/article/details/52061906&#34;&gt;[SC] OpenService 失败：1060指定的服务未安装_[sc] openservice 失败 1060: 指定的服务未安装。-CSDN博客&lt;/a&gt;&#xA;文章中提到了“服务”，在开始菜单中搜索服务，进入应用找到了一个名为WSL Service的服务。点左上角启动。&#xA;提取关键信息：&lt;strong&gt;1058、被禁用、关联的设备没有启动&lt;/strong&gt;。&#xA;检查功能是否开启：按下 &lt;code&gt;Win+S&lt;/code&gt; 搜索 &lt;strong&gt;启用或关闭Windows功能&lt;/strong&gt;&#xA;勾选&lt;code&gt;适用于Linux的Windows子系统&lt;/code&gt;和&lt;code&gt;虚拟机平台&lt;/code&gt;这两项，点击确定&#xA;重启电脑。&#xA;回来以后，用管理员身份运行powershell，强制重置WSL服务，依次执行：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wsl --shutdown&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wsl --unregister Arch &lt;span style=&#34;color:#7f848e&#34;&gt;# 替换为你的发行版名称&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wsl --install -d Arch &lt;span style=&#34;color:#7f848e&#34;&gt;# 重新注册发行版&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果提示内核缺失，在这里下&lt;a href=&#34;https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi&#34;&gt;https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi&lt;/a&gt;&lt;/p&gt;&#xA;&lt;p&gt;如果有以下输出：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;zcz  system32  ♥ 21:32  wsl --shutdown&#xA;此应用程序需要适用于 Linux 的 Windows 子系统可选组件。&#xA;通过运行安装它： wsl.exe --install --no-distribution&#xA;可能需要重新启动系统才能使更改生效。&#xA;错误代码: Wsl/WSL_E_WSL_OPTIONAL_COMPONENT_REQUIRED&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;两种可能：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;没有安装WSL服务&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;服务被禁用&lt;/strong&gt;&#xA;后者比较棘手，我们先做第一种尝试&#xA;&lt;strong&gt;强制安装WSL组件&lt;/strong&gt;&#xA;&lt;strong&gt;以管理员身份运行 PowerShell&lt;/strong&gt;，执行以下命令：&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7f848e&#34;&gt;# 安装WSL核心组件（会自动启用虚拟化功能）&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wsl --install&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;输出：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;zcz  system32  ♥ 21:34  wsl --install&#xA;正在安装 Windows 可选组件: Microsoft-Windows-Subsystem-Linux&#xA;&#xA;Deployment Image Servicing and Management tool&#xA;Version: 10.0.19041.3636&#xA;&#xA;Image Version: 10.0.19045.5487&#xA;&#xA;启用一个或多个功能&#xA;[==========================100.0%==========================]&#xA;The operation completed successfully.&#xA;正在安装 Windows 可选组件: VirtualMachinePlatform&#xA;&#xA;Deployment Image Servicing and Management tool&#xA;Version: 10.0.19041.3636&#xA;&#xA;Image Version: 10.0.19045.5487&#xA;&#xA;启用一个或多个功能&#xA;[==========================100.0%==========================]&#xA;The operation completed successfully.&#xA;请求的操作成功。直到重新启动系统前更改将不会生效。&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;再次进行重启。&#xA;&lt;code&gt;Restart-Computer&lt;/code&gt;&#xA;开机加载界面显示：我们无法完成更新，正在撤销更改。。&#xA;尝试过的方法：进入安全模式，尝试重启更新，失败。&#xA;安全模式仍然失败，选择临时禁用WSL服务&#xA;管理员cmd执行&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e5c07b&#34;&gt;sc &lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;config&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;LxssManager&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;start&lt;/span&gt;= &lt;span style=&#34;color:#e06c75&#34;&gt;disabled&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;shutdown&lt;/span&gt; /&lt;span style=&#34;color:#e5c07b&#34;&gt;r &lt;/span&gt;/&lt;span style=&#34;color:#e06c75&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#d19a66&#34;&gt;0&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;输出：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;C:\Windows\system32&amp;gt;sc config LxssManager start= disabled&amp;amp;&amp;amp; shutdown /r /t 0&#xA;[SC] OpenService 失败 1060:&#xA;&#xA;指定的服务未安装。&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;唉，老朋友，又见面了。只能祭出来我的终极大杀器。&lt;/p&gt;&#xA;&lt;h3 id=&#34;彻底重装wsl&#34;&gt;&lt;strong&gt;彻底重装WSL&lt;/strong&gt;&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7f848e&#34;&gt;# 卸载所有发行版&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;wsl&lt;/span&gt; -&lt;span style=&#34;color:#e06c75&#34;&gt;-unregister&lt;/span&gt; *&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7f848e&#34;&gt;# 删除残留配置&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e5c07b&#34;&gt;Remove-Item&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;-Path&lt;/span&gt; &lt;span style=&#34;color:#98c379&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;$env:USERPROFILE&lt;/span&gt;&lt;span style=&#34;color:#98c379&#34;&gt;\AppData\Local\Packages\*Linux*&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;-Recurse&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;-Force&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;输出：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;zcz  system32  ♥ 22:04  # 卸载所有发行版&#xA;&amp;gt; wsl --unregister *&#xA;&amp;gt; # 删除残留配置&#xA;&amp;gt; Remove-Item -Path &amp;#34;$env:USERPROFILE\AppData\Local\Packages\*Linux*&amp;#34; -Recurse -Force&#xA;正在注销。&#xA;此应用程序需要适用于 Linux 的 Windows 子系统可选组件。&#xA;通过运行安装它： wsl.exe --install --no-distribution&#xA;可能需要重新启动系统才能使更改生效。&#xA;错误代码: Wsl/WSL_E_WSL_OPTIONAL_COMPONENT_REQUIRED&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;输入&lt;code&gt;wsl.exe --install --no-distribution&lt;/code&gt;&#xA;输出：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;zcz  system32  ♥ 22:09  wsl.exe --install --no-distribution&#xA;正在安装 Windows 可选组件: Microsoft-Windows-Subsystem-Linux&#xA;&#xA;Deployment Image Servicing and Management tool&#xA;Version: 10.0.19041.3636&#xA;&#xA;Image Version: 10.0.19045.5487&#xA;&#xA;启用一个或多个功能&#xA;[==========================100.0%==========================]&#xA;The operation completed successfully.&#xA;正在安装 Windows 可选组件: VirtualMachinePlatform&#xA;&#xA;Deployment Image Servicing and Management tool&#xA;Version: 10.0.19041.3636&#xA;&#xA;Image Version: 10.0.19045.5487&#xA;&#xA;启用一个或多个功能&#xA;[==========================100.0%==========================]&#xA;The operation completed successfully.&#xA;请求的操作成功。直到重新启动系统前更改将不会生效。&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;继续重启，显示“我们无法完成更新，正在撤销更改。”&lt;/p&gt;&#xA;&lt;p&gt;&lt;strong&gt;以管理员身份打开CMD&lt;/strong&gt;：&#xA;按下 &lt;code&gt;Win+S&lt;/code&gt; → 输入 &lt;code&gt;cmd&lt;/code&gt; → 右键选择 &lt;strong&gt;“以管理员身份运行”&lt;/strong&gt;  &lt;strong&gt;执行以下命令（注意语法）&lt;/strong&gt;：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sc config LxssManager start= auto&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sc config vmcompute start= auto&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;net start LxssManager&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;net start vmcompute&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;仍然1085，管理员cmd执行&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;dism /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart&#xA;&#xA;dism /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;尝试重装WSL，出现&#xA;![[_posts\Windows-WSL报错：Error-0x80080005\Pasted image 20250304222548.png]]&lt;/p&gt;&#xA;&lt;p&gt;研究了一阵子，&lt;strong&gt;&lt;code&gt;vmcompute&lt;/code&gt;&lt;/strong&gt;（虚拟机核心服务）和 &lt;strong&gt;&lt;code&gt;LxssManager&lt;/code&gt;&lt;/strong&gt;（WSL管理服务）均未注册，导致WSL安装向导崩溃。&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-Powershell&#34; data-lang=&#34;Powershell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#7f848e&#34;&gt;# 以管理员身份运行&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;dism&lt;/span&gt;.&lt;span style=&#34;color:#e06c75&#34;&gt;exe&lt;/span&gt; /&lt;span style=&#34;color:#e06c75&#34;&gt;online&lt;/span&gt; /&lt;span style=&#34;color:#e5c07b&#34;&gt;enable-feature&lt;/span&gt; /&lt;span style=&#34;color:#e06c75&#34;&gt;featurename&lt;/span&gt;:&lt;span style=&#34;color:#e5c07b&#34;&gt;Microsoft-Windows&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;-Subsystem-Linux&lt;/span&gt; /&lt;span style=&#34;color:#e06c75&#34;&gt;all&lt;/span&gt; /&lt;span style=&#34;color:#e06c75&#34;&gt;norestart&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;dism&lt;/span&gt;.&lt;span style=&#34;color:#e06c75&#34;&gt;exe&lt;/span&gt; /&lt;span style=&#34;color:#e06c75&#34;&gt;online&lt;/span&gt; /&lt;span style=&#34;color:#e5c07b&#34;&gt;enable-feature&lt;/span&gt; /&lt;span style=&#34;color:#e06c75&#34;&gt;featurename&lt;/span&gt;:&lt;span style=&#34;color:#e06c75&#34;&gt;VirtualMachinePlatform&lt;/span&gt; /&lt;span style=&#34;color:#e06c75&#34;&gt;all&lt;/span&gt; /&lt;span style=&#34;color:#e06c75&#34;&gt;norestart&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;dism&lt;/span&gt;.&lt;span style=&#34;color:#e06c75&#34;&gt;exe&lt;/span&gt; /&lt;span style=&#34;color:#e06c75&#34;&gt;online&lt;/span&gt; /&lt;span style=&#34;color:#e5c07b&#34;&gt;enable-feature&lt;/span&gt; /&lt;span style=&#34;color:#e06c75&#34;&gt;featurename&lt;/span&gt;:&lt;span style=&#34;color:#e06c75&#34;&gt;HypervisorPlatform&lt;/span&gt; /&lt;span style=&#34;color:#e06c75&#34;&gt;all&lt;/span&gt; /&lt;span style=&#34;color:#e06c75&#34;&gt;norestart&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;重启，“我们无法完成更新，正在撤销更改。”&#xA;。。。。。、、、、&#xA;尽力了。现在看来，是系统层面的硬伤了。可能行得通的有重装系统和保留文件重置系统两个选择。不过我还是会和这个问题死磕一下，我就不信我干不成这个事。明天还要苦逼上学，先睡了。&#xA;2025.3.4 22:57&lt;/p&gt;&#xA;&lt;p&gt;————————————————————————————&lt;/p&gt;&#xA;&lt;p&gt;2025.3.5&lt;/p&gt;&#xA;&lt;p&gt;尝试&lt;strong&gt;强制修复系统核心组件&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# 以管理员身份运行 PowerShell&#xA;sfc /scannow&#xA;DISM /Online /Cleanup-Image /RestoreHealth&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;重置 Windows Update 组件&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# 管理员cmd执行 net stop wuauserv&#xA;net stop cryptSvc&#xA;net stop bits&#xA;net stop msiserver&#xA;rmdir C:\Windows\SoftwareDistribution /S /Q&#xA;net start wuauserv&#xA;net start cryptSvc&#xA;net start bits&#xA;net start msiserver&#xA;# 强制重建WSL核心服务&#xA;sc create vmcompute binPath= &amp;#34;C:\Windows\System32\vmcompute.exe&amp;#34; start= auto type= kernel&#xA;sc create LxssManager binPath= &amp;#34;C:\Windows\System32\lxss\LxssManager.dll&amp;#34; start= auto type= own&#xA;net start vmcompute&#xA;net start LxssManager&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;仍然无法启动。使用wsl偶遇神秘怪异bug拼尽全力无法战胜。我都已经浪费这么长时间来研究这个问题，为什么我不直接装个Linux系统呢。周末就把这傻卵系统换成Arch！&lt;/p&gt;&#xA;</description>
    </item>
  </channel>
</rss>

